<mat-progress-bar mode="indeterminate" *ngIf="loading"></mat-progress-bar>

<form [formGroup]="photoForm" (ngSubmit)="submit()" *ngIf="!loading">
  <mat-card>
    <mat-card-content>
      <div fxLayout="row">
        <div fxLayout="column" fxFlex>
          <mat-form-field>
            <input matInput formControlName="title" placeholder="Title"/>
          </mat-form-field>
    
          <mat-form-field>
            <input matInput formControlName="caption" placeholder="Caption"/>
          </mat-form-field>
    
          <mat-form-field>
            <app-input-file formControlName="file" placeholder="File" valuePlaceholder="No file selected" required></app-input-file>
            <mat-icon matSuffix>folder</mat-icon>
            <mat-error *ngIf="photoForm.controls['file'].errors && photoForm.controls['file'].errors.required">
              Must select a file
            </mat-error>
          </mat-form-field>
        </div>
        <div fxLayoutAlign="center center" fxFlex [ngSwitch]="imgSrc">
          <div *ngSwitchCase="null">
              <mat-icon class="no-photo">photo</mat-icon>
              <div>No Image</div>
          </div>
          <div *ngSwitchDefault>
              <img [src]="imgSrc" class="preview-img"/>
          </div>
        </div>
      </div>
    </mat-card-content>

    <mat-card-actions>
      <button mat-button type="submit">Upload</button>
    </mat-card-actions>
  </mat-card>
</form>